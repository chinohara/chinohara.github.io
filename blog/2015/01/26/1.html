<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="description" content="chinohara'page.">
    <!-- オープングラフプロトコル。通称OGプロトコル start -->
    <meta property="og:title" content="Chinohara's page"/>
    <meta property="og:description" content="Weekend activity log."/>
    <meta property="og:image" content="http://chinohara.github.io/images/PENGIN.png"/>
    <meta property="og:url" content="http://chinohara.github.io/"/>
    <meta property="og:type" content="blog"/>
    <!-- オープングラフプロトコル。通称OGプロトコル end -->
    <!-- Include jQuery -->
    <!--<script src="javascript/jquery.js"></script>-->
    <!-- Include the Sidr JS -->
    <!--<script src="javascript/sidr/jquery.sidr.min.js"></script>-->
    <!--<script src="javascript/common.js"></script>-->
    <script src="/javascripts/jquery.js" type="text/javascript"></script>
    <script src="/javascripts/sidr/jquery.sidr.min.js" type="text/javascript"></script>
    <script src="/javascripts/common.js" type="text/javascript"></script>

    <!-- Pure CSS theme -->
    <!--<link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.5.0/pure-min.css">-->
    <link href="/stylesheets/pure.css" rel="stylesheet" type="text/css" media="all" />
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.5.0/grids-responsive-min.css">
    <link href='http://fonts.googleapis.com/css?family=Orbitron' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Reenie+Beanie' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
    <!-- Include Sidr bundled CSS theme -->
    <!--<link rel="stylesheet" href="css/sidr/jquery.sidr.dark.css">-->
    <!--<link href="/stylesheets/pure.css" rel="stylesheet" type="text/css" media="all" />-->
    <link href="/stylesheets/sidr/jquery.sidr.dark.css" rel="stylesheet" type="text/css" media="all" />
    <link href="/stylesheets/genericons/genericons.css" rel="stylesheet" type="text/css" media="all" />
    <link href="/stylesheets/common.css" rel="stylesheet" type="text/css" media="all" />
    <link href="/stylesheets/modules/syntax_highlight.css" rel="stylesheet" type="text/css" media="all" />

    <title>Chinohara's Page - 動的URLでシェアボタンを配置</title>
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/blog/feed.xml" />

    <!-- googleAnalytics start-->
    <script>
    if (location.hostname == "chinohara.github.io") {
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-59010299-1', 'auto');
      ga('send', 'pageview');
    }
    </script>
    <!-- googleAnalytics end-->
  </head>
  <body>
    <div class="header">
      <div class="home-menu pure-menu pure-menu-open pure-menu-horizontal">
          <a class="pure-menu-heading mark" href="/index.html"><div class="container shape"></div></a>
          <ul>
              <li>Chinohara's page</li>
              <li class="last-right"><a id="right-menu" href="#right-menu" class="genericon genericon-menu last-right"></a></li>
          </ul>
      </div>
      <div id="sidr-right">
        <ul>
          <li><a href="/index.html">Home</a></li>
          <li><a href="/me.html">About Me</a></li>
        </ul>
      </div>
    </div>
    <div class="pure-g">
      <div id="main" role="main">
        <div class="sub-header pure-u-1">
          <div class="subtitle-m">Weekend activity log.</div>
        </div>
        <div class="pure-u-1 pure-u-sm-2-3">
          
		<div class="content">
		    <div class="content-head">
		      <a href="/blog/2015/01/26/1.html">動的URLでシェアボタンを配置</a>
		    </div>
		    <div class="content-date">
		      <div alt="f303" class="genericon genericon-time" title="genericon-time"></div>
		      <span>2015/01/26 23:53</span>
		    </div>
		    <div class="content-tages">
		      <div alt="f302" class="genericon genericon-tag top-mg" title="genericon-tag"></div>
		            <span class="tag"><a href="/blog/tags/sns.html">SNS</a></span>
		    </div>

		    <div class="content-main">
		      <p>ブログにシェアボタンを配置しようと思ったときに、
facebookの公式サイトをサラッと読むと
固定URLへのシェアボタンになってしまうような・・・</p>

<p>URLを動的に設定して、現在のページへ遷移するシェアボタンにするために調べた内容をメモ。
</p>

<h2 id="section">公式の手順は？</h2>

<h3 id="twitter">twitter</h3>
<p>公式にある手順を元にすると、動的にURLを生成して、現在のURLにリンクを張ってツイート可能。
<a href="https://about.twitter.com/resources/buttons">https://about.twitter.com/resources/buttons</a></p>

<h3 id="facebook">facebook</h3>
<p>公式にある手順を元にすると、カスタムされた属性に固定URLを設定しないといけない。
<a href="https://developers.facebook.com/docs/plugins/like-button">https://developers.facebook.com/docs/plugins/like-button</a></p>

<h2 id="section-1">方針</h2>
<p>javascriptの初期化処理で、facebookのシェアボタンを生成するiframeを挿入する時に
現在のページのURLを設定する。</p>

<p>あんまり格好良くはないですが、省エネです。</p>

<h3 id="html">html</h3>
<div class="highlight html"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"shares"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"twitter-share-button"</span><span class="nt">&gt;</span>
		<span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"https://twitter.com/share"</span> <span class="na">class=</span><span class="s">"twitter-share-button"</span> <span class="na">data-lang=</span><span class="s">"ja"</span><span class="nt">&gt;</span>ツイート<span class="nt">&lt;/a&gt;</span>
	<span class="nt">&lt;/div&gt;</span>
	<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"fb-share-button"</span> <span class="na">class=</span><span class="s">"fb-share-button"</span><span class="nt">&gt;&lt;/div&gt;</span>
	<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"end-share-button"</span><span class="nt">&gt;&lt;/div&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></td></tr></tbody></table>
</div>

<h3 id="javascript">javascript</h3>
<p>※　appIdはFacebookページや、webサービス登録したものを使う。</p>

<div class="highlight javascript"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></td><td class="code"><pre><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span>
	<span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="c1">// facebookシェアボタン初期化</span>
		<span class="nx">facebookShare</span><span class="p">();</span>
		<span class="c1">//  twitterシェアボタン初期化</span>
		<span class="nx">twitterShare</span><span class="p">(</span><span class="nb">document</span><span class="p">,</span> <span class="s1">'script'</span><span class="p">,</span> <span class="s1">'twitter-wjs'</span><span class="p">);</span>	
	<span class="p">}</span>
<span class="p">);</span>

<span class="c1">// facebookシェアボタン初期化</span>
<span class="kd">function</span> <span class="nx">facebookShare</span><span class="p">()</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="nb">encodeURIComponent</span><span class="p">(</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">);</span>
	<span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"fb-share-button"</span><span class="p">).</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s1">'&lt;iframe src="//www.facebook.com/plugins/share_button.php?href='</span> <span class="o">+</span> <span class="nx">url</span> <span class="o">+</span> <span class="s1">'&amp;amp;layout=button_count&amp;amp;appId=xxxxxxxxxxxxxxxx" scrolling="no" frameborder="0" style="border:none; overflow:hidden;" allowTransparency="true"&gt;&lt;/iframe&gt;'</span><span class="p">;</span>
<span class="p">}</span>

<span class="c1">//  twitterシェアボタン初期化</span>
<span class="kd">function</span> <span class="nx">twitterShare</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">s</span><span class="p">,</span> <span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
	<span class="kd">var</span> <span class="nx">js</span><span class="p">,</span><span class="nx">fjs</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="nx">s</span><span class="p">)[</span><span class="mi">0</span><span class="p">],</span><span class="nx">p</span><span class="o">=</span><span class="sr">/^http:/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">location</span><span class="p">)?</span><span class="s1">'http'</span><span class="p">:</span><span class="s1">'https'</span><span class="p">;</span>
	<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="nx">d</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">id</span><span class="p">)){</span><span class="nx">js</span><span class="o">=</span><span class="nx">d</span><span class="p">.</span><span class="nx">createElement</span><span class="p">(</span><span class="nx">s</span><span class="p">);</span>
		<span class="nx">js</span><span class="p">.</span><span class="nx">id</span><span class="o">=</span><span class="nx">id</span><span class="p">;</span><span class="nx">js</span><span class="p">.</span><span class="nx">src</span><span class="o">=</span><span class="nx">p</span><span class="o">+</span><span class="s1">'://platform.twitter.com/widgets.js'</span><span class="p">;</span>
		<span class="nx">fjs</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span><span class="p">(</span><span class="nx">js</span><span class="p">,</span><span class="nx">fjs</span><span class="p">);</span>
	<span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table>
</div>

<h2 id="section-2">今後余力があったら・・・</h2>
<p>今回は公式サイトが提供するソースを元に、カスタマイズしてスマートフォンからも押しやすいボタンを作りたいなと。</p>

<h2 id="url">シェアボタン設置時に参考にしたURL</h2>
<p><a href="http://qiita.com/shuntaro_tamura/items/26f8186d4111364918eb">各種SNSへのシェアボタン設置方法まとめ</a></p>


		    </div>
		</div>
	    <!-- SNS Share-->
	    <div class="shares">
			<div class="twitter-share-button">
				<a href="https://twitter.com/share" class="twitter-share-button" data-lang="ja">ツイート</a>
			</div>
			<div id="fb-share-button" class="fb-share-button"></div>
			<div class="end-share-button"></div>
		</div>

        </div>
        <div class="sidebar pure-u-1 pure-u-sm-1-3">
          <!--<div class="pure-g">-->
          <aside>
            <div class="subarea">
              <h5>スポンサーリンク</h5>
              <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                <!-- chinohara's blog sidebar -->
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-8958604100285376"
                     data-ad-slot="7544079046"
                     data-ad-format="auto"></ins>
                <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
              </script>
            </div>
            <div class="subarea">
              <div class="sub-head">
                Recent Articles
              </div>
                <div class="resent-date">
                  <span>2015/07/26 19:11</span>
                </div>
                <div class="sub-main">
                  <a href="/blog/2015/07/26/1.html">heroku向け、Javaアプリのローカル環境構築</a>
                </div>
                <div class="resent-date">
                  <span>2015/03/13 00:56</span>
                </div>
                <div class="sub-main">
                  <a href="/blog/2015/03/13/1.html">ローカルにWordpressを構築してみた</a>
                </div>
                <div class="resent-date">
                  <span>2015/03/03 01:05</span>
                </div>
                <div class="sub-main">
                  <a href="/blog/2015/03/03/1.html">非デザイナーがデザインする時に見た方が良い書籍、webサイト</a>
                </div>
                <div class="resent-date">
                  <span>2015/02/09 23:42</span>
                </div>
                <div class="sub-main">
                  <a href="/blog/2015/02/09/1.html">Google Adsenseの申請をしてみた</a>
                </div>
                <div class="resent-date">
                  <span>2015/02/04 01:49</span>
                </div>
                <div class="sub-main">
                  <a href="/blog/2015/02/04/1.html">Google Analyticsを設置してみた</a>
                </div>
            </div>
            <div class="subarea">
              <div class="sub-head">
                Tags
              </div>
                <div class="sub-main">
                  <a href="/blog/tags/middleman.html">Middleman (1)</a>
                </div>
                <div class="sub-main">
                  <a href="/blog/tags/sns.html">SNS (1)</a>
                </div>
                <div class="sub-main">
                  <a href="/blog/tags/google-analytics.html">Google Analytics (1)</a>
                </div>
                <div class="sub-main">
                  <a href="/blog/tags/google-adsense.html">Google Adsense (1)</a>
                </div>
                <div class="sub-main">
                  <a href="/blog/tags/design.html">Design (1)</a>
                </div>
                <div class="sub-main">
                  <a href="/blog/tags/wordpress.html">wordpress (1)</a>
                </div>
                <div class="sub-main">
                  <a href="/blog/tags/github.html">github (1)</a>
                </div>
                <div class="sub-main">
                  <a href="/blog/tags/heroku.html">heroku (1)</a>
                </div>
                <div class="sub-main">
                  <a href="/blog/tags/eclipse.html">eclipse (1)</a>
                </div>
            </div>
            <div class="subarea">
              <div class="sub-head">
                By Year
              </div>
                <div class="sub-main">
                  <a href="/blog/2015.html">2015 (7)</a>
                </div>
            </div>
          </aside>
          <!--</div>-->
        </div>
      </div>
    </div>
    <div class="footer">
      <footer>
       <p>&copy; 2015 Copyright  by Chinohara's page</p>
      </footer>
    </div>
  </body>
</html>


